# 云开发 - 云菜谱小程序 开发日志
###### 代应豪 by 20200715

# 个人中心页
* 用到scroll-view可滚动视图区域组件
* weUI的Slideview左滑删除组件
>1.用户第一次授权登录既是注册，需要调用wx.loginApi接口获取登录凭证
>2.调用云函数获取用户openid
>3.获取管理员集合表中的数据，用于判断是否是管理员身份登录
>4.用户登录成功后，第一次登录，向用户集合表中添加一条用户信息，若再次登录，则查询该用户的个人信息是否为最新，若不是则更新信息

# 菜谱发布页
* 通过查询获取已经添加的菜谱分类信息 并展示 radio-group单项选择器组件
* 图片的上传 WeUI的Uploader组件上传图片 云开发的存储中

# 拥有管理员权限
## 菜谱分类添加
* 对菜谱分类的集合进行数据库的增删改查操作，菜谱分类名唯一
## 菜谱审核功能 -通过添加标志 进行判断
* 当注册用户发布菜谱后，并不会第一时间展示，而是需要管理员审核通过后才能展示出来
* 用发布菜谱不符合规范时，管理员可以给予审核不通过，删除该菜谱信息
* 审核已经通过的菜谱，可以进行下线处理

# 搜索页面
* 搜索功能通过正则进行菜谱名的模糊匹配进行查询，跳转到菜谱列表页面
* 通过添加查询条件 获取浏览量和关注量靠前的9个菜谱进行展示热门菜谱
* 近期搜索 通过在本地添加缓存信息，缓存6条用户最近搜索的菜谱关键词，添加清除记录的功能，可以清除本地缓存

# 首页
* 通过菜谱分类 跳转到分类页面 查询数据库集合中所有的菜谱分类信息
* 儿童菜谱/中餐菜谱 跳转到列表页 仅展示对应的菜谱信息
* 热门推荐 仅获取按浏览量和用户关注度进行倒序排序展示

# 菜谱详情页
* swiper滑块视图容器 做轮播图展示菜谱图片信息
>1.根据菜谱的id获取对应的菜谱详情信息，通过详情信息中发布菜谱的用户openid到用户表中获取对应openid的用户信息
>2.根据菜谱id到菜谱关注集合表中查询，当前浏览用户是否关注该菜谱，对展示的界面进行改变
>3.如果当前用户为关注该菜谱，第一次关注则向菜谱关注表中添加用户和菜谱关注信息。如果是已经关注再次点击，即是取消关注，只需要改变菜谱关注表中的状态信息即可
* 分享功能 可以分享给朋友或群里 button open-type="share" onShareAppMessage生命周期
---

```
首先到项目根目录
npm i
下载项目所需依赖 -- node_modules

修改成自己的appid
```

---


## 参考文档

- [云开发文档](https://developers.weixin.qq.com/miniprogram/dev/wxcloud/basis/getting-started.html)

